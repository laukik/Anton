<html>
<title>Anton</title>
<script src="js/jquery-3.2.1.min.js"></script>
<script src="js/moment.js"></script>
<script src="js/collapse.js"></script>
<script src="js/transition.js"></script>
<script src="js/combo.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
<script src="js/dateTime.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/js/bootstrap-datepicker.min.js"></script>
<script src="js/table2CSV.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
<link href="styles/open-iconic/font/css/open-iconic-bootstrap.css" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.0.1/css/all.css" rel="stylesheet">
<link href="styles/dateTime.css" rel="stylesheet">
<link href="styles/combo.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker.min.css">
<body class="container" background='images/grey.png' >
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link" href="/">
        <span class="oi oi-home" title="Home" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="/area">
        <span class="fa fa-compass" title="Area" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="/status">
        <span class="oi oi-code" title="Status" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="/task">
        <span class="fa fa-tasks" title="Task" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" href="/filter">
        <span class="fa fa-filter" title="Filter" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="/user">
        <span class="fa fa-user-circle" title="User" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="/taskType">
        <span class="fa fa-bug" title="Task Type" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="/application">
        <span class="fa fa-rocket" title="application" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item active">
      <a class="nav-link " href="/severity">
        <span class="fa fa-exclamation-circle" title="Severity" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="/chartFilter">
        <span class="fa fa-chart-pie" title="Charts" aria-hidden="true"/>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="/chartFilterLine">
        <span class="fa fa-chart-line" title="Charts" aria-hidden="true"/>
      </a>
    </li>
  </ul>
  <br/>
  <br/>
  <div class="row">
    <div class="col-lg-3">
      <h1><span class="badge badge-default form form-control form-input">Task Filters </span></h1>
      <form class="form" action="/filter" method="post">
        <button type="submit" style="margin-bottom:5px" class="form form-control btn btn-success"> Filter
          <span class="fa fa-filter" title="Filter" aria-hidden="true"/>
        </button>
        <input class="form form-control form-input" style="margin-bottom:5px"  type="text"  placeholder="Defect ID" name="taskId" >
        <div class="card checkbox form form-control" style="margin-bottom:5px" >
          <label > <span class="fa fa-user-circle" title="Area" aria-hidden="true"/> User </label>
          <br>
          <label><input type="checkbox"  selected="selected" value="" name = "username" checked > All </label>
          <% for( var i = 0; i < users.length;i++){ %>
            <label><input type="checkbox" value="<%= users[i].username %>" name = "username" > <%= users[i].username %> </label>
            <% } %>
          </div>
          <div class="card checkbox form form-control" style="margin-bottom:5px" >
            <label > <span class="fa fa-check-square" title="Task Type" aria-hidden="true"/> Task Type </label>
            <br>
            <label><input type="checkbox"  selected="selected" value="" name = "taskType" checked > All </label>
            <% for( var i = 0; i < tasktypes.length;i++){ %>
              <label><input type="checkbox" value="<%= tasktypes[i].taskType %>" name = "taskType" > <%= tasktypes[i].taskType %> </label>
              <% } %>
            </div>
            <div class="card jumbotron">
              <p class="lead"> Select Completion Date Range</p>
              <label> From Date</label>
              <div class='input-group date' id='datetimepicker1' style="margin-bottom:5px" >
                <!-- <input type='text' class="form form-control form-input" required="true" placeholder="Completion Date" name="workDate"/> -->
                <input class="datepicker form form-control form-input" data-date-format="dd/mm/yyyy" placeholder="From Date" name="fromDate"/>
                <span class="input-group-addon">
                  <span class="fa fa-calendar-plus"></span>
                </span>
              </div>
              <label> Till Date</label>
              <div class='input-group date' id='datetimepicker2' style="margin-bottom:5px" >
                <!-- <input type='text' class="form form-control form-input" required="true" placeholder="Completion Date" name="workDate"/> -->
                <input class="datepicker form form-control form-input" data-date-format="dd/mm/yyyy" placeholder="To Date" name="tillDate"/>
                <span class="input-group-addon">
                  <span class="fa fa-calendar-minus"></span>
                </span>
              </div>

            </div>

            <div class="card checkbox form form-control" style="margin-bottom:5px" >
              <label > <span class="fa fa-code" title="status" aria-hidden="true"/> Status </label>
              <br>
              <label><input type="checkbox"  selected="selected" value="" name = "status" checked > All </label>
              <% for( var i = 0; i < status.length;i++){ %>
                <label><input type="checkbox" value="<%= status[i].status %>" name = "status" > <%= status[i].status %> </label>
                <% } %>
              </div>
              <div class="card checkbox form form-control" style="margin-bottom:5px" >
                <label > <span class="fa fa-compass" title="Area" aria-hidden="true"/> Area </label>
                <br>
                <label><input type="checkbox"  selected="selected" value="" name = "area" checked > All </label>
                <% for( var i = 0; i < areas.length;i++){ %>
                  <label><input type="checkbox" value="<%= areas[i].area %>" name = "area" > <%= areas[i].area %> </label>
                  <% } %>
                </div>
                <div class="card checkbox form form-control" style="margin-bottom:5px" >
                  <label > <span class="fa fa-compass" title="Area" aria-hidden="true"/> Severity </label>
                  <br>
                  <label><input type="checkbox"  selected="selected" value="" name = "severity" checked > All </label>
                  <% for( var i = 0; i < severity.length;i++){ %>
                    <label><input type="checkbox" value="<%= severity[i].severity %>" name = "severity" > <%= severity[i].severity %> </label>
                    <% } %>
                </div>
                <div class="card checkbox form form-control" style="margin-bottom:5px" >
                  <label > <span class="fa fa-rocket" title="Application" aria-hidden="true"/> Application </label>
                  <br>
                  <label><input type="checkbox"  selected="selected" value="" name = "app" checked > All </label>
                  <% for( var i = 0; i < app.length;i++){ %>
                    <label><input type="checkbox" value="<%= app[i].app %>" name = "app" > <%= app[i].app %> </label>
                    <% } %>
                </div>
                  <button type="submit" style="margin-top:8px" class="form form-control btn btn-success"> Filter
                    <span class="fa fa-filter" title="Filter" aria-hidden="true"/>
                  </button>
                </form>
              </div>
              <div class="col-lg-8">
                <h1><span class="badge badge-default form form-control form-input"> Tasks </span></h1>
                <button class = 'form form-control btn btn-primary' id="export" data-export="export">
                  Export Data
                  <span class="fa fa-file-excel" title="Filter" aria-hidden="true"/>
                </button>
                <table class="table table-striped table-bordered table-hover" id='tableExp'>
                  <thead>
                  </tr>
                  <tr>

                    <th> User Name</th>
                    <th> Task Type</th>
                    <th> Completion Date</th>
                    <th> Description</th>
                    <th> Status</th>
                    <th> Area</th>
                    <th> Severity</th>
                    <th> Application</th>
                    <th> Defect ID</th>
                    <th> Hours</th>
                  </thead>
                  <tbody>
                    <% for( var i = 0 ; i < tasks.length; i ++){ %>
                      <!-- <span class="badge badge-primary"> -->
                      <tr>
                        <td><%= tasks[i].username %></td>
                        <td><%= tasks[i].taskType %></td>
                        <td><%= tasks[i].workDate.toDateString() %></td>
                        <td><%= tasks[i].description %></td>
                        <td><%= tasks[i].status %></td>
                        <td><%= tasks[i].area %></td>
                        <td><%= tasks[i].severity %></td>
                        <td><%= tasks[i].app %></td>
                        <td><%= tasks[i].taskId %></td>
                        <td>
                          <%if( tasks[i].timeTaken != undefined){%>
                          <%= tasks[i].timeTaken %>
                          <%}else{%>
                            NA
                          <%}%>
                        </td>
                      </tr>
                      <% } %>
                    </tbody>
                  </table>
                </div>

              </div>
            </body>
            <script type="text/javascript">
            // $(function () {
            //   $('#datetimepicker1').datetimepicker();
            // });
            $("#export").click(function(){
              $("#tableExp").tableToCSV();
            });
            $('.datepicker').datepicker({
              format: 'dd/mm/yyyy'
            });
            // .datepicker('setDate', new Date());
            </script>
            </html>
